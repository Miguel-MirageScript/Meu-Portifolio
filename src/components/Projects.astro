---
import { ExternalLinkIcon, WrenchIcon } from "lucide-preact";
import { SectionTitle } from "./UI";
import { Image } from "astro:assets";
import { ProjectsList } from "../utils/ProjectsList";
// Não faça await/import dinâmico se já puder importar direto!
---

<section
  id="projects"
  class="w-full min-h-screen px-6 py-4 pt-14 bg-background"
>
  <SectionTitle title="Meus Projetos" color="secondary">
    <div class="gsap_slider relative w-full overflow-x-hidden">
      <div class="gsap__track flex">
        {
          ProjectsList.slice(0, 3).map((project) => (
            <div class="gsap__item Project_Stagger Card_Main w-full flex_center flex-col bg-cardGradient overflow-hidden rounded-[0.4em] mt-3 opacity-0">
              <a
                href={project.Link}
                class="Projects_Preview w-full relative rounded-[0.4em]"
                target="_blank"
                rel="noopener noreferrer"
              >
                <Image
                  class="Card_Image bg-cover opacity-50 transition-opacity w-full"
                  style={{ borderRadius: "0.4em 0.4em 0 100%" }}
                  src={project.Shot}
                  alt={`Screenshot do projeto ${project.Name}`}
                  widths={[346, 800]}
                  sizes="(max-width: 720px) 346px, 800px"
                  loading="lazy"
                />
                <Image
                  class="absolute left-6 bottom-6"
                  src={project.Logo}
                  alt={`Logo do projeto ${project.Name}`}
                  width={project.LogoSize}
                  height={project.LogoSize}
                  loading="lazy"
                />
              </a>
              <div class="w-full text-[0.95em] px-4">
                <div class="flex justify-between items-center">
                  <h3 class="font-ubuntu text-[1.4em] py-3">{project.Name}</h3>
                  <div class="flex">
                    {project.Status === "development" && (
                      <div class="flex_center gap-2 px-1 py-0.5 text-orange-400">
                        <WrenchIcon size={16} />
                        <span class="text-[0.8em]">Em Desenvolvimento</span>
                      </div>
                    )}
                    {project.Link && (
                      <a
                        href={project.Link}
                        title={`Ver online ${project.Name}`}
                        target="_blank"
                        rel="noreferrer"
                        class="Projects_Link flex"
                      >
                        <ExternalLinkIcon aria-hidden="true" />
                        <span class="sr-only">
                          Demo do {project.Name}
                        </span>
                      </a>
                    )}
                  </div>
                </div>
                <p class="text-center">{project.ShortDesc}</p>
                <div class="w-full flex_center gap-4 py-3">
                  {project.Tech.map((tech) => (
                    <Image
                      src={tech.icon}
                      alt={`Ícone de tecnologia ${tech.title}`}
                      width={22}
                      height={22}
                      loading="lazy"
                    />
                  ))}
                </div>
              </div>
            </div>
          ))
        }
      </div>
    </div>
  </SectionTitle>
</section>
