---
import { CenterTitle } from "./UI";
import { ContactForm } from "./Preact";
import ContactArt from "../assets/Logos/ContactVector.png";
import { Image } from "astro:assets";
---

<section
    id="contact"
    class="w-full min-h-screen mb-16 lg:mb-[15em] px-6 py-4 pt-14 bg-background"
>
    <CenterTitle title="Contato" color="primary" />

    <div class="w-full flex_center flex-col p-4 text-[1.2em] text-center">
        <h3 class="Fade_Up gradientText font-ubuntu text-[2rem] lg:text-[2.4rem]">
            Vamos colaborar!
        </h3>
        <p class="Fade_Up">Entre em contato comigo para discutirmos suas necessidades de desenvolvimento web</p>
        <p class="Fade_Up">Ou apenas para dizer olÃ¡. ðŸ˜‰</p>
    </div>

    <div
        class="flex_center flex-col lg:flex-row w-full h-full gap-4 lg:gap-10 lg:px-20 pt-8 pb-16"
    >
        <div class="relative w-full flex_center flex-col">
            <div
                class="Fade_Up w-full max-w-[350px] scale-[0.9] lg:scale-1 lg:max-w-[450px] aspect-square rounded-full border-2 border-dashed border-contactSocialColor mb-8 md:mb-0 md:mt-7"
                id="socialCircle"
            >
                <!-- LinkedIn -->
                <a
                    href="https://www.linkedin.com/in/miguel-quiroz-cs/"
                    class="socialIcon absolute w-12 lg:w-16 aspect-square flex_center p-2 lg:p-4 bg-background outline-dashed outline-2 outline-contactSocialColor rounded-full"
                    title="LinkedIn"
                    target="_blank"
                    rel="noreferrer"
                    aria-label="LinkedIn"
                >
                    <svg
                        stroke="currentColor"
                        fill="currentColor"
                        style="color: var(--heroSocialColor);"
                        stroke-width="0"
                        viewBox="0 0 24 24"
                        height="30"
                        width="30"
                        xmlns="http://www.w3.org/2000/svg"
                    >
                        <path
                            d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-2.423-1.47-2.423-1.47 0-1.693 1.121-1.693 2.356v5.636h-3.553v-11.984h3.41v1.616h.044c.477-.9 1.631-2.423 3.33-2.423 3.56 0 4.21 2.351 4.21 5.437v6.273zM5.005 6.774c-1.42 0-2.301-.848-2.301-1.936 0-1.09.84-1.936 2.303-1.936 1.463 0 2.303.847 2.303 1.936-.002 1.088-.84 1.936-2.303 1.936zm1.758 13.678H3.245V8.455h3.518v11.997zM22.225 1.018H1.774C.802 1.018 0 1.821 0 2.793v18.414c0 .973.802 1.776 1.774 1.776h20.451c.973 0 1.774-.803 1.774-1.776V2.793c0-.972-.802-1.775-1.774-1.775z"
                        />
                    </svg>
                </a>

                <!-- Instagram -->
                <a
                    href="https://www.instagram.com/ofc.quiroz/"
                    class="socialIcon absolute w-12 lg:w-16 aspect-square flex_center p-2 lg:p-4 bg-background outline-dashed outline-2 outline-contactSocialColor rounded-full"
                    title="Instagram - @ofc.quiroz"
                    target="_blank"
                    rel="noreferrer"
                    aria-label="Instagram"
                >
                    <svg
                        stroke="currentColor"
                        fill="currentColor"
                        style="color: var(--heroSocialColor);"
                        stroke-width="0"
                        viewBox="0 0 16 16"
                        height="30"
                        width="30"
                        xmlns="http://www.w3.org/2000/svg"
                    >
                        <path
                            d="M8 0C5.829 0 5.556.01 4.703.048 3.85.088 3.269.222 2.76.42a3.917 3.917 0 0 0-1.417.923A3.927 3.927 0 0 0 .42 2.76C.222 3.268.087 3.85.048 4.7.01 5.555 0 5.827 0 8.001c0 2.172.01 2.444.048 3.297.04.852.174 1.433.372 1.942.205.526.478.972.923 1.417.444.445.89.719 1.416.923.51.198 1.09.333 1.942.372C5.555 15.99 5.827 16 8 16s2.444-.01 3.298-.048c.851-.04 1.434-.174 1.943-.372a3.916 3.916 0 0 0 1.416-.923c.445-.445.718-.891.923-1.417.197-.509.332-1.09.372-1.942C15.99 10.445 16 10.173 16 8s-.01-2.445-.048-3.299c-.04-.851-.175-1.433-.372-1.941a3.926 3.926 0 0 0-.923-1.417A3.911 3.911 0 0 0 13.24.42c-.51-.198-1.092-.333-1.943-.372C10.443.01 10.172 0 7.998 0h.003zm-.717 1.442h.718c2.136 0 2.389.007 3.232.046.78.035 1.204.166 1.486.275.373.145.64.319.92.599.28.28.453.546.598.92.11.281.24.705.275 1.485.039.843.047 1.096.047 3.231s-.008 2.389-.047 3.232c-.035.78-.166 1.203-.275 1.485a2.47 2.47 0 0 1-.599.919c-.28.28-.546.453-.92.598-.28.11-.704.24-1.485.276-.843.038-1.096.047-3.232.047s-2.39-.009-3.233-.047c-.78-.036-1.203-.166-1.485-.276a2.478 2.478 0 0 1-.92-.598 2.48 2.48 0 0 1-.6-.92c-.109-.281-.24-.705-.275-1.485-.038-.843-.046-1.096-.046-3.233 0-2.136.008-2.388.046-3.231.036-.78.166-1.204.276-1.486.145-.373.319-.64.599-.92.28-.28.546-.453.92-.598.282-.11.705-.24 1.485-.276.738-.034 1.024-.044 2.515-.045v.002zm4.988 1.328a.96.96 0 1 0 0 1.92.96.96 0 0 0 0-1.92zm-4.27 1.122a4.109 4.109 0 1 0 0 8.217 4.109 4.109 0 0 0 0-8.217zm0 1.441a2.667 2.667 0 1 1 0 5.334 2.667 2.667 0 0 1 0-5.334z"
                        />
                    </svg>
                </a>

                <!-- E-mail -->
                <a
                    href="mailto:miguel@miragescript.com"
                    class="socialIcon absolute w-12 lg:w-16 aspect-square flex_center p-2 lg:p-4 bg-background outline-dashed outline-2 outline-contactSocialColor rounded-full"
                    title="E-mail - miguel@miragescript.com"
                    aria-label="E-mail"
                    rel="noreferrer"
                >
                    <svg
                        stroke="currentColor"
                        fill="currentColor"
                        style="color: var(--heroSocialColor);"
                        stroke-width="0"
                        viewBox="0 0 24 24"
                        height="30"
                        width="30"
                        xmlns="http://www.w3.org/2000/svg"
                    >
                        <path
                            d="M24 5.457v13.909c0 .904-.732 1.636-1.636 1.636h-3.819V11.73L12 16.64l-6.545-4.91v9.273H1.636A1.636 1.636 0 0 1 0 19.366V5.457c0-2.023 2.309-3.178 3.927-1.964L5.455 4.64 12 9.548l6.545-4.91 1.528-1.145C21.69 2.28 24 3.434 24 5.457z"
                        />
                    </svg>
                </a>

                <!-- GitHub -->
                <a
                    href="https://github.com/Miguel-MirageScript"
                    class="socialIcon absolute w-12 lg:w-16 aspect-square flex_center p-2 lg:p-4 bg-background outline-dashed outline-2 outline-contactSocialColor rounded-full"
                    title="GitHub"
                    target="_blank"
                    rel="noreferrer"
                    aria-label="GitHub"
                >
                    <svg
                        stroke="currentColor"
                        fill="currentColor"
                        style="color: var(--heroSocialColor);"
                        stroke-width="0"
                        viewBox="0 0 24 24"
                        height="30"
                        width="30"
                        xmlns="http://www.w3.org/2000/svg"
                    >
                        <path
                            d="M12 .3a12 12 0 0 0-3.8 23.4c.6.1.8-.3.8-.6v-2.2c-3.3.7-4-1.5-4-1.5-.5-1.3-1.3-1.7-1.3-1.7-1.1-.7.1-.7.1-.7 1.2 0 1.8 1.2 1.8 1.2 1.1 1.9 3 1.3 3.8 1v-.7c-2.3-.2-4.5-1.1-4.5-5.1 0-1.1.4-2.1 1.2-2.8-.1-.2-.5-1.4.1-2.9 0 0 .9-.3 2.8 1.1A9.5 9.5 0 0 1 12 6.8c1.6 0 3.3.4 4.8 1.2 1.9-1.4 2.8-1.1 2.8-1.1.6 1.5.2 2.7.1 2.9.8.7 1.2 1.7 1.2 2.8 0 4-2.2 4.9-4.5 5.1v.7c0 .4.2.8.8.6A12 12 0 0 0 12 .3z"
                        />
                    </svg>
                </a>

                <!-- Discord -->
                <a
                    href="https://discord.gg/TpfP8sY4KG"
                    class="socialIcon absolute w-12 lg:w-16 aspect-square flex_center p-2 lg:p-4 bg-background outline-dashed outline-2 outline-contactSocialColor rounded-full"
                    title="Discord"
                    target="_blank"
                    rel="noreferrer"
                    aria-label="Discord"
                >
                    <svg
                        stroke="currentColor"
                        fill="currentColor"
                        style="color: var(--heroSocialColor);"
                        width="30px"
                        height="22px"
                        viewBox="0 0 30 22"
                    >
                        <path
                            d="M24.957 1.863C28.207 6.656 29.812 12.059 29.21 18.277c-.02.027-.035.051-.055.066-2.461 1.813-4.844 2.914-7.195 3.641a.1.1 0 0 1-.102-.035c-.543-.758-1.035-1.555-1.469-2.395a.098.098 0 0 1 .05-.02c.781-.293 1.527-.648 2.242-1.07a.1.1 0 0 0-.039-.152 14.6 14.6 0 0 1-15.492 0 .1.1 0 0 0-.04.152 13.9 13.9 0 0 0 2.254 1.074.094.094 0 0 1 .02.047c-.422.84-.918 1.641-1.469 2.398a.1.1 0 0 1-.035.031c-2.34-.727-4.723-1.828-7.184-3.641a.1.1 0 0 1-.02-.066C.188 12.898 1.21 7.449 4.938 1.863a.098.098 0 0 1 .04-.035A23.9 23.9 0 0 1 10.832.008a.09.09 0 0 1 .094.047c.254.449.543 1.027.742 1.5a23.5 23.5 0 0 1 6.574 0c.195-.461.477-1.051.73-1.5a.09.09 0 0 1 .09-.047A23.9 23.9 0 0 1 24.922 1.828a.098.098 0 0 1 .035.035ZM12.77 12.094c.02-1.59-1.137-2.906-2.586-2.906-1.441 0-2.586 1.305-2.586 2.906 0 1.602 1.168 2.906 2.586 2.906 1.438 0 2.586-1.305 2.586-2.906Zm9.555 0c.023-1.59-1.133-2.906-2.582-2.906-1.441 0-2.586 1.305-2.586 2.906 0 1.602 1.168 2.906 2.586 2.906 1.449 0 2.582-1.305 2.582-2.906Z"
                        />
                    </svg>
                </a>
            </div>

            <Image
                class="Fade_Up absolute bottom-10 md:bottom-2 w-[180px] md:w-[280px] z-10"
                src={ContactArt}
                alt="Logo Mirage Script"
                loading="lazy"
            />
        </div>

        <ContactForm client:load />
    </div>
</section>

<script is:inline type="module">
    document.addEventListener("DOMContentLoaded", () => {
        const center = document.querySelector("#socialCircle");
        const images = document.querySelectorAll(".socialIcon");
        const logo = document.querySelector("#socialCircle + .Fade_Up.absolute");

        if (!center || !images.length || !logo) {
            console.error("CÃ­rculo social, Ã­cones ou logo nÃ£o encontrados.");
            return;
        }

        const positionLogo = () => {
            logo.style.left = "50%";
            logo.style.top = "50%";
            logo.style.transform = "translate(-50%, -50%)";
        };

        const positionIcons = () => {
            const iconSize = images[0].clientWidth;
            const radius = Math.ceil((center.clientWidth * 0.8) / 2);
            const numIcons = images.length;
            const angleStep = (2 * Math.PI) / numIcons;

            images.forEach((img, i) => {
                const angle = i * angleStep - Math.PI / 2;
                const x = Math.cos(angle) * radius;
                const y = Math.sin(angle) * radius;

                img.style.left = `calc(50% + ${x}px - ${iconSize / 2}px)`;
                img.style.top = `calc(50% + ${y}px - ${iconSize / 2}px)`;
            });
        };

        window.addEventListener("resize", positionIcons);
        positionLogo();
        positionIcons();
    });
</script>
